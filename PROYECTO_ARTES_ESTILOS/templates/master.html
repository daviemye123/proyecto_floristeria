{% extends 'base.html' %}
{% load static %}

{% block content %}

<main class="main-content">
    <div class="container account-wrapper">
        
        <section class="profile-column">
            <h1 class="page-title">MI CUENTA</h1>
            
            <div class="avatar-container">
                <div class="avatar-circle">
                    {% if user.profile.avatar %}
                        <img src="{{ user.profile.avatar.url }}" alt="{{ user.username }}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                    {% else %}
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="35" r="25" fill="black"/>
                            <path d="M20 85 C20 60 80 60 80 85" fill="black"/>
                        </svg>
                    {% endif %}
                </div>
            </div>

            <div class="profile-info">
                <p class="user-id">{{ user.first_name|upper }} {{ user.last_name|upper }}-{{ user.groups.first.name|upper|default:"USER" }}</p>
                
                <div class="info-row">
                    <img src="{% static 'img/icon-location.png' %}" class="small-icon" alt="Ubicación">
                    <div class="text-group">
                        <span>{{ user.profile.ciudad|upper|default:"CIUDAD" }}</span>
                    </div>
                </div>

                <div class="info-row">
                    <img src="{% static 'img/icon-location.png' %}" class="small-icon" alt="Departamento">
                    <div class="text-group">
                        <span>{{ user.profile.departamento|upper|default:"DEPARTAMENTO" }}</span>
                    </div>
                </div>

                <div class="info-row">
                    <img src="{% static 'img/icon-email.png' %}" class="small-icon" alt="Email">
                    <span>{{ user.email|upper }}</span>
                </div>

                <a href="#" class="edit-link">
                    <img src="{% static 'img/icon-edit.png' %}" class="small-icon" alt="Editar">
                    EDITAR INFORMACIÓN
                </a>
            </div>
        </section>

        <section class="menu-column">
            <a href="#" class="neu-button orders-button">
                <div class="neu-text">
                    <span class="main-txt">ARREGLOS</span>
                    <span class="sub-txt">PENDIENTES</span>
                </div>
                <div class="icon-wrapper">
                    <img src="{% static 'img/apuro.png' %}" alt="Orders">
                    {% if ordenes_pendientes_count > 0 %}
                    <span class="badge-count">{{ ordenes_pendientes_count }}</span>
                    {% endif %}
                </div>
            </a>
            <a href="#" class="neu-button orders-button">
                <div class="neu-text">
                    <span class="main-txt">USUARIO</span>
                    <span class="sub-txt">AGREGAR NUEVOS USUARIOS</span>
                </div>
                <div class="icon-wrapper">
                    <img src="{% static 'img/usuarios.png' %}" alt="Orders">
                    {% if ordenes_pendientes_count > 0 %}
                    <span class="badge-count">{{ ordenes_pendientes_count }}</span>
                    {% endif %}
                </div>
            </a>

            
        </section>

    </div>
</main>

{% endblock %}
{% block scripts %}
    <script src="{% static 'js/navbar.js' %}"></script>
{% endblock %}